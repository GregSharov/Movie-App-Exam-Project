<%- include("partials/header.ejs") %>
<main class="bg-gray-50 dark:bg-gray-800 min-h-screen flex flex-col items-center justify-center py-10">
  <h2 class="text-3xl font-semibold text-gray-800 dark:text-gray-100 mb-8">Add info about new movie</h2>
  <div class="bg-white dark:bg-gray-900 bg-gradient-to-tl from-gray-100 to-white dark:bg-gradient-to-tl dark:from-gray-800 dark:to-gray-900 shadow-md rounded-lg p-8 max-w-md w-full">
    <form action="/add" method="post" enctype="multipart/form-data" class="space-y-6">
      <div>
        <label for="title" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Title *</label>
        <input type="text" id="title" name="title" autofocus class="mt-1 block w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="Awesome Movie" required>
        <div class="h-5">
          <p id="titleAlert" class="text-sm py-3 text-orange-600"></p>
        </div>
      </div>

      <div>
        <label for="director" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Director *</label>
        <input type="text" id="director" name="director" class="mt-1 block w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="John Johnson" required>
        <div class="h-5">
          <p id="directorAlert" class="text-sm py-3 text-orange-600"></p>
        </div>
      </div>

      <div>
        <label for="actors" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Actors * (comma-separated. Two actors minimum)</label>
        <textarea id="actors" name="actors" class="mt-1 block w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="John Johnson, Peter Peterson" required></textarea>
        <div class="h-5">
          <p id="actorsAlert" class="text-sm py-3 text-orange-600"></p>
        </div>
      </div>

      <div>
        <label for="year" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Year *</label>
        <input type="number" min="1888" max="<%= new Date().getFullYear() %>" id="year" name="year" placeholder="<%= new Date().getFullYear() %>" class="mt-1 block w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
        <div class="h-5">
          <p id="yearAlert" class="text-sm py-3 text-orange-600"></p>
        </div>
      </div>

      <div>
        <label for="image" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Image *</label>
        <div class="mt-1 flex items-center">
          <label class="flex items-center justify-center w-full p-3 border border-gray-300 rounded-lg shadow-sm cursor-pointer hover:bg-gray-100 dark:bg-gray-700 dark:border-gray-600 dark:hover:bg-gray-600">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-600 dark:text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v16h16V4H4zM4 16h16M4 8h16m-7 6h1m-4 0h1m-4 0h1" />
            </svg>
            <span class="ml-2 text-gray-600 dark:text-gray-400">Choose file</span>
            <input type="file" id="image" name="image" accept="image/*" class="hidden">
          </label>
        </div>
        <div class="h-5 mb-5">
          <p id="imageAlert" class="text-sm py-3 text-orange-600"></p>
        </div>
        <p id="file-description" class="mt-2 text-sm text-gray-600 dark:text-gray-400"></p>
      </div>

      <div class="flex justify-between space-x-4">
        <button id="submitAddMovie" type="submit" class="px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">Upload</button>
        <a href="/" class="px-4 py-2 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400">Back to main page</a>
      </div>
    </form>
  </div>
</main>
<%- include("partials/footer.ejs") %>


<!-- Add Upload File Title -->
<script>
  $("#image").on("change", function(event) {
    const file = event.target.files[0];
    const fileDescription = $("#file-description");
    if (file) {
      fileDescription.text(`Selected file: ${file.name}`);
    } else {
      fileDescription.text("");
    }
  });
</script>